#!/bin/bash
#
# Job to do merge of one set of sort sj support files. Files
# supplied must be already sorted
# 
set -beEu -o pipefail
export LC_ALL=C
export TMPDIR=/scratch/tmp

if [ $# -lt 3 ] ; then
    echo "rslStarSjSupMergeJob out.sj in1.sj ..." >&2
    exit 1
fi
outFile="$1"
shift
inFiles="$@"
outTmp=$outFile.$(hostname).$$.tmp

mkdir -p $(dirname $outTmp)
sort -k1,1 -k2,2n -m $@ >$outTmp
mv -f $outTmp $outFile
