#!/usr/bin/awk -f

# splitFq -v outFileFmt=basename_%d.fq in.fq"
# split FASTQ into two pair-base FASTQ

BEGIN {
    if (outFileFmt == "") {
        print "-v outFileFmt not specified" >"/dev/stderr"
        exit(1)
    }
}

# set redirect base on which pair
((NR-1)%4 == 0) {
   if ($0 ~ /\/1$/) {
       outFile = sprintf(outFileFmt, 1);
   } else if ($0 ~ /\/2$/) {
       outFile = sprintf(outFileFmt, 2);
   } else {
       print "failed to parse pair number out of: "$0 >"/dev/stderr"
       exit(1);
   }
}
{
    print $0 > outFile
}

